<div class="row d-flex users-lists">
  <table class="table table-striped">
    <thead>
      <tr>
        <th></th>
        <th colspan="3">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text" id="basic-addon1"><i class="fas fa-search"></i></span>
            </div>
            <input
              type="text"
              class="form-control"
              placeholder="Search"
              aria-label="Search"
              aria-describedby="basic-addon1"
              [(ngModel)]="search"
            />
          </div>
        </th>
        <th>
          <button class="btn btn-icon btn-outline-dark" (click)="addNewUser()">
            <i class="fas fa-user-plus"></i>
          </button>
        </th>
      </tr>
    </thead>
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col" *ngIf="showPasswordField">Password</th>
        <th scope="col">Phone</th>
        <th scope="col">Roles</th>
        <th scope="col">Receive Notifications</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users | searchFilter: search">
        <td scope="row">
          <span>{{ user.id }}</span>
        </td>
        <td>
          <div class="input-group" *ngIf="user.edit">
            <input type="text" class="form-control" [(ngModel)]="user.name" />
          </div>
          <span *ngIf="!user.edit">{{ user.name }}</span>
        </td>
        <td>
          <span *ngIf="!user.newUser">{{ user.email }}</span>
          <div class="input-group" *ngIf="user.newUser">
            <input type="text" class="form-control" [(ngModel)]="user.email" />
          </div>
        </td>
        <td *ngIf="showPasswordField">
          <div class="input-group">
            <input type="password" class="form-control" [(ngModel)]="user.password" />
          </div>
        </td>
        <td>
          <div class="input-group" *ngIf="user.edit">
            <input type="tel" class="form-control" [(ngModel)]="user.phone" />
          </div>
          <span *ngIf="!user.edit">{{ user.phone }}</span>
        </td>
        <td>
          <span *ngIf="!user.edit">{{ getRoles(user.roles) }}</span>
          <app-multi-dropdown
            *ngIf="user.edit"
            [items]="user.roles"
            placeholder="Select Roles"
            [showSearch]="false"
            [showAll]="false"
            [showStatus]="false"
            [showError]="false"
            (itemChange)="onItemChange($event)"
          >
          </app-multi-dropdown>
        </td>
        <td>
          <div *ngIf="user.edit">
            <input type="checkbox" [(ngModel)]="user.receiveNotification" />
          </div>
          <span *ngIf="!user.edit">{{ user.receiveNotification }}</span>
        </td>
        <td>
          <button *ngIf="!user.edit" class="btn btn-icon btn-outline-dark" (click)="toggleEdit(user)">
            <i class="fas fa-user-edit"></i>
          </button>
          <button *ngIf="!user.edit" class="btn btn-icon btn-outline-dark" (click)="delteUser(user)">
            <i class="fas fa-user-minus"></i>
          </button>
          <button *ngIf="user.edit" class="btn btn-icon btn-outline-dark" (click)="saveUser(user)">
            <i class="fas fa-save"></i>
          </button>
          <button *ngIf="user.edit" class="btn btn-icon btn-outline-dark" (click)="toggleEdit(user)">
            <i class="fas fa-times"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<app-footer></app-footer>
